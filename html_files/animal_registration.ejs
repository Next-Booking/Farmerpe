<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css"  href="./stylesheet/registration_style.css">
</head>
<body>
    <main>
        <h1>
           Animal Registration Form
        </h1>
        <form id="myForm" method="post" enctype="multipart/form-data">
            <div class="form-dflex">
                <div class="input_sec">
                    <label class="text_label" for="animalType">Animal Type</label>
                    <select id="animalType" name="animalType">
                        <option value="" disabled selected>--Select Animal Type--</option>
                        <option value="cow">Cow</option>
                        <option value="buffalo">Buffalo</option>
                        <option value="goat">Goat</option>
                        <option value="sheep">Sheep</option>
                    </select>
                </div>                
               
                <div class="input_sec">
                    <label class="text_label" for="rnumber">Registration Number</label>
                    <input type="text" id="rnumber" name="rnumber"  value="<%= num %>" readonly>
                </div>
                
                <div class="input_sec">
                    <label class="text_label" for="agent_name">Agent Name</label>
                    <input type="text" id="aname" name="aname">
                </div>
                <div class="input_sec">
                    <label class="text_label" for="password">Agent Password</label>
                    <input type="password" id="password" name="password">
                </div> 
    
                <div class="image_column">
                    
                    <label for="aimg" class="cimg-label">
                        <img src="./images/Square_profile_sizing.png" alt="" class="selectedImage" id="aimg_display">
                        <input class="cimg-input" type="file" id="aimg" name="aimg" accept="image/*" onchange="displayImage2()">
                    </label>
                </div>
            </div>
         
            <button class="submit" onclick="submitForm()">Submit</button>
          </form> 
    </main>
    <script>
        
        function displayImage2(){
    
            var input2 = document.getElementById('aimg')
            // Get the selected file

            var file2 = input2.files[0]
 
            if (file2) {
                // Create a FileReader
                var reader = new FileReader();

                // Set up a function to be called when the FileReader has loaded the image
                reader.onload = function (e) {
                    // Get the data URL representing the file
                    var imageDataUrl = e.target.result;

                    // Update the source of the image element
                    document.getElementById('aimg_display').src = imageDataUrl;
                };

                // Read the file as a data URL
                reader.readAsDataURL(file2);
            }
        }
    function submitForm() {
      // Set the form action to the default backend endpoint for form submission
      document.getElementById('myForm').action = '/register-animal';
      document.getElementById('myForm').submit();
    }

    function generateReceipt() {
      // Set the form action to the backend endpoint for generating receipt
      document.getElementById('myForm').action = '/generate';

      // Submit the form
      document.getElementById('myForm').submit();
    }
    </script>
</body>
</html>